## 代码打包

如今，前端模块化成为趋势，模块化写法可以使得日益复杂的前端应用更易于维护。

前端通常使用 `<script>` 标签引入一个 js 文件（可以看作一个模块），这种方式会有以下缺点：

- 模块直接在全局工作，大量模块成员会污染全局作用域
- 各个模块也没有私有空间，可能会在外部被访问或修改
- 容易产生命名冲突
- 无法管理模块之间的依赖关系
- 很难分辨每个成员所属的模块

- 零散的模块文件导致页面频繁发送网络请求，影响应用工作效率

解决这些问题，更为理想的方式是将零散的 JS 文件（模块）合并成一个 JS 文件，其余用到的模块可以通过代码控制，按需加载，这就是所谓打包。

## 代码分割

在生产环境一般为提高页面加载性能，，通常会将项目代码打包到一起，这样需要请求的 JS 文件减少，减少了 HTTP 请求。

但是随着单独打包产物的体积越来越大，会出现一系列加载性能问题。

- 无法做到按需加载，即使当前页面不需要的代码也会进行加载，一个典型的例子就是路由组件。
- 缓存复用率低，颗粒度大，小范围改动代码会导致整个产物缓存失效，一个典型的例子就是 CSS 代码分割

Vite 使用 Rollup

## 语法降级与 polyfill

由于各种浏览器的差异，我们需要使我们打包出既支持现代浏览器又支持旧版浏览器的产物。

旧版浏览器的语法兼容问题主要分两类：

- 语法降级问题

  将高级语法转为低级语法，比如某些浏览器不支持箭头函数，需要将其转为 `function(){}` 语法

- Polyfill 缺失问题

  为浏览器提前注入一些 API 的实现代码，保证产物可以正常使用这些 API，例如 `Object.entries`

通常是使用 babel

## 处理静态资源

