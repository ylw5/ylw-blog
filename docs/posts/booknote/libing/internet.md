HTTP/1.0

引入请求头和响应头：支持多种不同类型的数据

状态码

Cache机制



HTTP/1.1

增加持久连接

为每个域名最多同时维护6个TCP连接

使用CDN的实现域名分片机制：将一个页面的资源利用多个域名下载，提高tcp并发数量

缺点：

- 带宽利用率不理想

  - TCP慢启动（为解决网络拥塞）

    每个域名维护一个持久连接

  - 多条TCP连接竞争固定带宽，不能协商让哪些关键资源优先下载

  - 队头阻塞（http层）

    一个TCP管道同一时刻只能处理一个请求。

    由于HTTP/1.1机制导致：会把同域名下的资源排序然后拆分成包按顺序发送。

    TCP层的对头阻塞仍然存在。

    



HTTP/2

引入二进制分帧层实现多路复用

![img](https://static001.geekbang.org/resource/image/86/6a/86cdf01a3af7f4f755d28917e58aae6a.png?wh=1142*1156)

可设置请求优先级

服务器推送：将数据提前推送到浏览器

头部（请求头和响应头）压缩



缺点：TCP的队头阻塞仍然存在

在 TCP 传输过程中，由于单个数据包的丢失而造成的阻塞称为 TCP 上的队头阻塞。（丢包了整个TCP连接就会处于暂停状态）由于只有一个TCP连接，所以影响更深



TCP本身缺陷：

- 建立连接的延时（握手过程慢）
- 协议僵化，很难改进（中间设备僵化、基于操作系统内核）



HTTP/3

QUIC协议