---
title: é˜²æŠ–å’ŒèŠ‚æµ
time: 2022-10-17
---
# é˜²æŠ–å’ŒèŠ‚æµ

## é˜²æŠ–ï¼ˆdebounceï¼‰

> åœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œå°†**è¿žç»­çš„å¤šæ¬¡è§¦å‘äº‹ä»¶**è½¬åŒ–ä¸ºåªè§¦å‘ä¸€æ¬¡

### ç†è§£ï¼š

- **ç»“æŸçŠ¶æ€**æ‰§è¡Œ
- æŠ€èƒ½æœ‰è“„åŠ›è¿‡ç¨‹ï¼Œå¦‚æžœè¢«æ‰“æ–­äº†å°±è¦é‡æ–°è“„åŠ›

![image-20221022162057922](assets/image-20221022162057922.png)

### åº”ç”¨ï¼š

- ç”¨æˆ·åœ¨è¾“å…¥å€¼æ—¶è‡ªåŠ¨è”æƒ³ï¼Œä¸€èˆ¬éƒ½æ˜¯ç­‰è¾“å…¥å®ŒæˆåŽå†è¯·æ±‚æ•°æ®ï¼Œè€Œä¸æ˜¯æ¯è¾“å…¥ä¸€ä¸ªå­—æ¯å°±å‘é€ä¸€æ¬¡è¯·æ±‚ï¼ˆèŠ‚çº¦è¯·æ±‚èµ„æºï¼‰
- é¡µé¢resizeè§¦å‘äº‹ä»¶

### æ€è·¯ï¼š

- åœ¨äº‹ä»¶è¢«è§¦å‘nç§’åŽæ‰§è¡Œå›žè°ƒï¼Œå¦‚æžœåœ¨è¿™nç§’å†…å†æ¬¡è¢«è§¦å‘ï¼Œåˆ™é‡æ–°è®¡æ—¶ã€‚

- åœ¨äº‹ä»¶åˆæ¬¡è§¦å‘æ—¶å¼€å¯ä¸€ä¸ªå®šæ—¶å™¨ï¼Œè‹¥åœ¨è®¾å®šå»¶æ—¶å†…å†æ¬¡è¢«è§¦å‘ï¼Œåˆ™æ¸…é™¤åŽŸæœ‰å®šæ—¶å™¨ï¼Œé‡æ–°è®¡æ—¶ã€‚*ï¼ˆåˆ©ç”¨é—­åŒ…ç‰¹æ€§ç»´æŠ¤ç‰¹å®šå®šæ—¶å™¨`timer`ï¼‰*

### å®žçŽ°

```javascript
function debounce(fn, wait) {
  let timer = null;
  return function () {
    if (timer) {
      clearTimeout(timer);
    }
    timer = setTimeout(() => {
      fn.apply(this, arguments);
    }, wait);
  };
}
```

```javascript
let debounceFn = debounce((a) => {
  console.log(a);
}, 1000)
debounceFn(1)
debounceFn(2)
// è¾“å‡º2
```

## èŠ‚æµï¼ˆthrottleï¼‰

> åœ¨ä¸€ä¸ªæ—¶é—´é—´éš”å†…ï¼Œä¸ç®¡è§¦å‘äº‹ä»¶å¤šå°‘æ¬¡ï¼Œæœ€ç»ˆåªè°ƒç”¨æ‰§è¡Œä¸€æ¬¡

### ç†è§£ï¼š

- **æ—¶é—´é—´éš”**æ‰§è¡Œ
- æŠ€èƒ½æœ‰å†·å´æ—¶é—´ï¼Œåœ¨å†·å´æ—¶é—´å†…æŠŠé”®ç›˜æ‰£çƒ‚äº†ä¹Ÿç”¨ä¸å‡ºæŠ€èƒ½ðŸ˜‚
- æ¼æ–—é¡¶éƒ¨æœ‰å¾ˆå¤šæ°´ï¼Œæœ¬æ¥åœ¨1åˆ†é’Ÿå†…å¯ä»¥æµå‡ºå¾ˆå¤šï¼ŒçŽ°åœ¨æœ‰äº†é˜€é—¨ï¼Œä¸€åˆ†é’Ÿå†…åªèƒ½æµå‡ºä¸€æ»´ï¼Œæ‰€ä»¥å«åšèŠ‚æµï¼Œé˜²æ­¢æµé‡è¿‡å¤§ã€‚

![image-20221022161921763](assets/image-20221022161921763.png)

### åº”ç”¨ï¼š

- ç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼Œåˆ¤æ–­æ˜¯å¦æ»‘åˆ°åº•éƒ¨è¯·æ±‚æ›´å¤šèµ„æº
- è¿žç»­ç‚¹å‡»åˆ·æ–°ï¼Œé—´éš”å‘é€è¯·æ±‚ï¼ˆæé˜²æš´èºå¤šåŠ¨**æ‰‹æŠ–**çš„ç”¨æˆ·ðŸ™‚ï¼‰

### æ€è·¯ï¼š

- æ—¶é—´æˆ³ï¼šå¦‚æžœå½“å‰è§¦å‘è·ç¦»ä¸Šæ¬¡è§¦å‘æ—¶é—´é—´éš”å¤§äºŽçº¦å®šå€¼*ï¼ˆç»´æŠ¤`preTime`ï¼‰*ï¼Œåˆ™å¯ä»¥è°ƒç”¨ã€‚
- å®šæ—¶å™¨ï¼šäº‹ä»¶è§¦å‘æ—¶è‹¥å­˜åœ¨è¿è¡Œä¸­çš„å®šæ—¶å™¨*ï¼ˆç»´æŠ¤å®šæ—¶å™¨`timer`ï¼‰*ï¼Œåˆ™ä¸èƒ½è°ƒç”¨å‡½æ•°ï¼Œå¦åˆ™å¯ä»¥å¼€å¯ä¸€ä¸ªå®šæ—¶å™¨è°ƒç”¨å‡½æ•°ã€‚

## å®žçŽ°ï¼š

```javascript
// æ—¶é—´æˆ³
// ç«‹å³æ‰§è¡Œï¼ˆåœ¨è§„å®šæ—¶é—´å¼€å§‹æ—¶æ‰§è¡Œï¼‰
function throttle1(fn, delay) {
  let preTime = 0
  return function () {
    let context = this
    let now = new Date()
    if (now - preTime > delay) {
      fn.apply(context, arguments)
      preTime = now
    }
  };
}

// å®šæ—¶å™¨
// æœ€åŽæ‰§è¡Œï¼ˆåœ¨è§„å®šæ—¶é—´ç»“æŸæ—¶æ‰§è¡Œï¼‰
function throttle2(fn, delay) {
  let timer = null
  return function () {
    if(!timer) {
      timer = setTimeout(() => {
        fn.apply(this, arguments)
        timer = null
      }, delay);
    }
  };
}
```



